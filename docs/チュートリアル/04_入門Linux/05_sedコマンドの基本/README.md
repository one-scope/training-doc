[戻る](../README.md)

# `sed` コマンドの基本

- [`sed` コマンドの基本](#sed-コマンドの基本)
  - [`sed` コマンドとは](#sed-コマンドとは)
  - [基本的な使いかた](#基本的な使いかた)
    - [主なオプション](#主なオプション)
    - [主なスクリプト](#主なスクリプト)
      - [置換するスクリプト](#置換するスクリプト)
      - [削除するスクリプト](#削除するスクリプト)

## `sed` コマンドとは

`sed` コマンドは、ファイルに対して様々なテキスト処理を行うコマンドです。

## 基本的な使いかた

`sed` コマンドの基本的な構文は次のとおりです。

```bash
sed [オプション] "スクリプト" 処理対象のファイル名
```

### 主なオプション

| オプション      | 意味                                                                |
| --------------- | ------------------------------------------------------------------- |
| `-i`            | 処理対象のファイルを直接変更する                                    |
| `-E`            | 拡張正規表現(Extended Regular Expressions)をつかう                  |
| `-e スクリプト` | スクリプトを指定する<br/>※ 複数のスクリプトを指定する場合に使用する |

### 主なスクリプト

#### 置換するスクリプト

| スクリプト                                                                 | 意味                                                                                                                                                                                                           |
| -------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `s/{検索パターン}/{置換後の文字列}/`                                       | `{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                                                                       |
| `s/{検索パターン}/{置換後の文字列}/g`                                      | `{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                                                                         |
| `{行番号}s/{検索パターン}/{置換後の文字列}/`                               | `{行番号}` 行目の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                                            |
| `{行番号}s/{検索パターン}/{置換後の文字列}/g`                              | `{行番号}` 行目の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                                              |
| `{行番号}!s/{検索パターン}/{置換後の文字列}/`                              | `{行番号}` 行目以外の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                                        |
| `{行番号}!s/{検索パターン}/{置換後の文字列}/g`                             | `{行番号}` 行目以外の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                                          |
| `{行番号1},{行番号2}s/{検索パターン}/{置換後の文字列}/`                    | `{行番号1}` 行目から `{行番号2}` 行目の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                      |
| `{行番号1},{行番号2}s/{検索パターン}/{置換後の文字列}/g`                   | `{行番号1}` 行目から `{行番号2}` 行目の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                        |
| `{行番号1},{行番号2}!s/{検索パターン}/{置換後の文字列}/`                   | `{行番号1}` 行目から `{行番号2}` 行目以外の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                  |
| `{行番号1},{行番号2}!s/{検索パターン}/{置換後の文字列}/g`                  | `{行番号1}` 行目から `{行番号2}` 行目以外の行のうち、`{検索パターン}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                    |
| `/{検索パターン1}/s/{検索パターン2}/{置換後の文字列}/`                     | `{検索パターン1}` にマッチする行のうち、`{検索パターン2}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                              |
| `/{検索パターン1}/s/{検索パターン2}/{置換後の文字列}/g`                    | `{検索パターン1}` にマッチする行のうち、`{検索パターン2}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                                |
| `/{検索パターン1}/!s/{検索パターン2}/{置換後の文字列}/`                    | `{検索パターン1}` にマッチする行以外の行のうち、`{検索パターン2}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える                                      |
| `/{検索パターン1}/!s/{検索パターン2}/{置換後の文字列}/g`                   | `{検索パターン1}` にマッチする行以外の行のうち、`{検索パターン2}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える                                        |
| `/{検索パターン1}/,/{検索パターン2}/s/{検索パターン3}/{置換後の文字列}/`   | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行のうち、`{検索パターン3}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える         |
| `/{検索パターン1}/,/{検索パターン2}/s/{検索パターン3}/{置換後の文字列}/g`  | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行のうち、`{検索パターン3}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える           |
| `/{検索パターン1}/,/{検索パターン2}/!s/{検索パターン3}/{置換後の文字列}/`  | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行以外の行のうち、`{検索パターン3}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内の最初にマッチした文字列のみを置き換える |
| `/{検索パターン1}/,/{検索パターン2}/!s/{検索パターン3}/{置換後の文字列}/g` | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行以外の行のうち、`{検索パターン3}` にマッチした文字列を `{置換後の文字列}` に置き換える<br/>※ 行内のマッチするすべての文字列を置き換える   |

#### 削除するスクリプト

| スクリプト                             | 意味                                                                                    |
| -------------------------------------- | --------------------------------------------------------------------------------------- |
| `{行番号}d`                            | `{行番号}` 行目の行を削除する                                                           |
| `{行番号}!d`                           | `{行番号}` 行目以外の行を削除する                                                       |
| `{行番号1},{行番号2}d`                 | `{行番号1}` 行目から `{行番号2}` 行目の行を削除する                                     |
| `{行番号1},{行番号2}!d`                | `{行番号1}` 行目から `{行番号2}` 行目以外の行を削除する                                 |
| `/{検索パターン}/d`                    | `{検索パターン}` にマッチする行を削除する                                               |
| `/{検索パターン}/!d`                   | `{検索パターン}` にマッチする行以外の行を削除する                                       |
| `/{検索パターン1}/,/{検索パターン2}/d` | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行を削除する         |
| `/{検索パターン1}/,/検索パターン2/!d`  | `{検索パターン1}` にマッチする行から `{検索パターン2}` にマッチする行以外の行を削除する |
