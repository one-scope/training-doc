[戻る](../README.md)

# 条件分岐と `test` コマンド

## `if` 構文

シェルスクリプトでの `if` 構文は次のように記述します。

```bash
if コマンド1; then
  # コマンド1が成功（終了ステータスが0）した場合に実行する処理
elif コマンド2; then
  # コマンド2が成功（終了ステータスが0）した場合に実行する処理
else
  # コマンド1、コマンド2がどちらも失敗した場合に実行する処理
fi
```

## `test` コマンド

`test` コマンドは `if` 構文と組み合わせて使うことが多く、様々な条件を評価するためのコマンドです。

`test` コマンドは次のように記述します。

```bash
if test 条件式; then
  # 条件式が真の場合に実行する処理
fi
```

または

```bash
if [ 条件式 ]; then
  # 条件式が真の場合に実行する処理
fi
```

### 数値の比較

`test` コマンドで数値を比較するには次のように記述します。

| 書式                  | 意味                                      |
| --------------------- | ----------------------------------------- |
| `[ 数値1 -eq 数値2 ]` | 数値1と数値2が等しい（equal）             |
| `[ 数値1 -ne 数値2 ]` | 数値1と数値2が等しくない（not equal）     |
| `[ 数値1 -gt 数値2 ]` | 数値1が数値2より大きい（greater than）    |
| `[ 数値1 -lt 数値2 ]` | 数値1が数値2より小さい（less than）       |
| `[ 数値1 -ge 数値2 ]` | 数値1が数値2以上（greater than or equal） |
| `[ 数値1 -le 数値2 ]` | 数値1が数値2以下（less than or equal）    |

次の例では変数 `x` が `10` より大きい場合にメッセージを表示します。

```bash
x=20
if [ ${x} -gt 10 ]; then
  echo "x は 10 より大きい"
fi
```

### 文字列の比較

`test` コマンドで文字列を比較するには次のように記述します。

| 書式                     | 意味                                      |
| ------------------------ | ----------------------------------------- |
| `[ 文字列1 = 文字列2 ]`  | 文字列1と文字列2が等しい（equal）         |
| `[ 文字列1 != 文字列2 ]` | 文字列1と文字列2が等しくない（not equal） |
| `[ -z 文字列 ]`          | 文字列が空である（zero length）           |
| `[ -n 文字列 ]`          | 文字列が空でない（non-zero length）       |

次の例では変数 `x` が `hello` であるときにメッセージを表示します。

```bash
x="hello"
if [ "${x}" = "hello" ]; then
  echo "x は hello である"
fi
```

### ファイルの存在確認

`test` コマンドでファイルの存在確認を行うには次のように記述します。

| 書式                | 意味                           |
| ------------------- | ------------------------------ |
| `[ -e ファイル名 ]` | ファイルが存在する             |
| `[ -f ファイル名 ]` | ファイルが通常のファイルである |
| `[ -d ファイル名 ]` | ファイルがディレクトリである   |
| `[ -r ファイル名 ]` | ファイルが読み込み可能である   |
| `[ -w ファイル名 ]` | ファイルが書き込み可能である   |
| `[ -x ファイル名 ]` | ファイルが実行可能である       |

次の例では変数 `x` が通常のファイルであるときにメッセージを表示します。

```bash
x="hello.txt"
if [ -f "${x}" ]; then
  echo "x は通常のファイルである"
fi
```

----
[前へ](../04_ヒアドキュメント/README.md) | [次へ](../06_条件実行/README.md)
